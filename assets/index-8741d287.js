(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();const c="55d6f7a56945cb0906b10816ff8b13d1",l="https://api.themoviedb.org/3";async function f(t){return(await(await fetch(`${l}/search/movie?api_key=${c}&query=${t}`)).json()).results}async function h(t){return await(await fetch(`${l}/movie/${t}?api_key=${c}`)).json()}const y=async()=>{try{const t=`${l}/movie/popular?api_key=${c}`,o=await fetch(t);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return(await o.json()).results}catch(t){throw console.error("Error fetching popular movies",t),t}};async function g(t){var o;if(console.log("Movie Id",t),!t){console.error("Error: movieId invalid!");return}try{const e=await h(t);console.log(e);const s=document.getElementById("modal-title"),r=document.getElementById("modal-description"),n=document.getElementById("modal-rating"),a=document.getElementById("modal-where-to-watch"),d=document.getElementById("modal-poster"),i=document.getElementById("modal-trailer"),u=document.getElementById("details-modal");if(!s||!r||!n||!a||!d||!i||!u){console.error("Error: Missing required elements in the modal");return}s.textContent=e.title||"No title available",r.textContent=e.overview||"No description available",n.textContent=`Rating: ${e.vote_average||"N/A"}`,a.textContent="Available on: "+(e.homepage||"No information available"),d.src=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/200x300?text=No+Image",((o=e.videos)==null?void 0:o.results.length)>0?i.innerHTML=`<iframe src='https://www.youtube.com/embed/${e.videos.results[0].key}' frameborder='0'></iframe>`:i.innerHTML="No trailer available",u.style.display="flex"}catch(e){console.error("Error fetching movie details:",e)}}document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".close-button"),o=document.getElementById("details-modal");t&&t.addEventListener("click",()=>{o.style.display="none"}),window.addEventListener("click",e=>{e.target===o&&(o.style.display="none")})});function p(t){const o=document.getElementById("results-container");o.innerHTML="",t.forEach(e=>{const s=document.createElement("div");s.classList.add("result-item"),s.innerHTML=`
        <img src="https://image.tmdb.org/t/p/w500/${e.poster_path}" alt="${e.title}" />
        <h3>${e.title}</h3>
        <p>${e.release_date}</p>
        <button class='details-button' data-id ='${e.id}'>View Details</button>
    `,o.appendChild(s)}),document.querySelectorAll(".details-button").forEach(e=>{e.addEventListener("click",s=>{const r=s.target.getAttribute("data-id");r?g(r):console.error("Error, movieId is null or undefined!")})})}const m=document.getElementById("search-form");m&&m.addEventListener("submit",async t=>{t.preventDefault();const o=document.getElementById("search-input");if(!o)return;const e=o.value.trim();if(!e)return;const s=await f(e);p(s)});document.addEventListener("DOMContentLoaded",async()=>{console.log("fetching popular movies...");try{const t=await y();p(t)}catch(t){console.error("Error to search popular movies:",t)}});
